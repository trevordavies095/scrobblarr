<div id="albums-content">
{% if has_data %}
<div class="albums-table-container">
    <table class="albums-table">
        <thead>
            <tr>
                <th class="rank-cell">Rank</th>
                <th class="album-cell">Album</th>
                <th class="artist-cell">Artist</th>
                <th class="scrobbles-cell">Scrobbles</th>
                <th class="percentage-cell">% of Total</th>
            </tr>
        </thead>
        <tbody>
            {% for album in albums %}
            <tr>
                <td class="rank-cell">
                    {% if album.rank <= 3 %}
                        {% if album.rank == 1 %}ðŸ¥‡{% elif album.rank == 2 %}ðŸ¥ˆ{% elif album.rank == 3 %}ðŸ¥‰{% endif %}
                    {% else %}
                        {{ album.rank }}
                    {% endif %}
                </td>
                <td class="album-cell">
                    {% comment %}
                    <!-- Future enhancement: Link to album detail page -->
                    <a href="{% url 'core:album-detail' album.id %}">
                    {% endcomment %}
                    <span class="album-name">{{ album.name }}</span>
                    {% comment %}
                    </a>
                    {% endcomment %}
                    {% if album.mbid %}
                    <span class="album-mbid" style="font-size: 0.8rem; color: #666; display: block;">
                        MBID: {{ album.mbid|slice:":8" }}...
                    </span>
                    {% endif %}
                </td>
                <td class="artist-cell">
                    {% comment %}
                    <!-- Future enhancement: Link to artist detail page -->
                    <a href="{% url 'core:artist-detail' album.artist_id %}" class="artist-name">
                        {{ album.artist_name }}
                    </a>
                    {% endcomment %}
                    <span class="artist-name">{{ album.artist_name }}</span>
                </td>
                <td class="scrobbles-cell">
                    {{ album.scrobble_count|floatformat:0 }}
                </td>
                <td class="percentage-cell">
                    <div class="percentage-display">
                        <span class="percentage-text">{{ album.percentage|floatformat:1 }}%</span>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: {{ album.progress_width }}%"></div>
                        </div>
                    </div>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="5" class="empty-state">
                    <span class="empty-state-icon">ðŸ’¿</span>
                    <h3>No Albums Found</h3>
                    <p>No albums found for the selected time period.</p>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    {% if has_data %}
    <div class="summary-info">
        <span>
            Showing top {{ total_albums }} album{{ total_albums|pluralize }} for {{ period_display }}
        </span>
        <span>
            {{ total_scrobbles|floatformat:0 }} total scrobble{{ total_scrobbles|pluralize }}
        </span>
    </div>
    {% endif %}
</div>

{% else %}
<!-- Empty State -->
<div class="albums-table-container">
    <div class="empty-state">
        <span class="empty-state-icon">ðŸ’¿</span>
        <h3>No Data Available</h3>
        <p>
            {% if selected_period == 'all' %}
                No scrobbles found in your library. Import some data to see your top albums.
            {% else %}
                No scrobbles found for {{ period_display }}. Try selecting a different time period.
            {% endif %}
        </p>
        {% if error %}
        <div class="error-details" style="margin-top: 1rem; padding: 1rem; background: rgba(255, 0, 0, 0.1); border: 1px solid rgba(255, 0, 0, 0.3); border-radius: 8px;">
            <strong>Error:</strong> {{ error }}
        </div>
        {% endif %}
        <div style="margin-top: 1.5rem;">
            <a href="{% url 'core:index' %}" class="btn btn-primary">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 12H5"/>
                    <polyline points="12,19 5,12 12,5"/>
                </svg>
                Back to Dashboard
            </a>
        </div>
    </div>
</div>
{% endif %}
</div>